{% extends "sqladmin/details.html" %}

{% block content %}

<div style="margin-bottom:20px">

    <a href="/bot/admin/user/list" class="btn btn-secondary">‚¨Ö –ù–∞–∑–∞–¥</a>

    <a href="/bot/admin/user/edit/{{ model.id }}" class="btn btn-primary">
        ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
    </a>

    <a href="/bot/admin/user/delete/{{ model.id }}"
       class="btn btn-danger"
       onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?')">
        üóë –£–¥–∞–ª–∏—Ç—å
    </a>

</div>


<h2>üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</h2>

<table class="table table-bordered">
    <tr>
        <th>ID</th>
        <td>{{ model.id }}</td>
    </tr>
    <tr>
        <th>Telegram ID</th>
        <td>{{ model.telegram_id }}</td>
    </tr>
    <tr>
        <th>Username</th>
        <td>{{ model.username }}</td>
    </tr>
    <tr>
        <th>–ò–º—è</th>
        <td>{{ model.first_name }}</td>
    </tr>
    <tr>
        <th>–§–∞–º–∏–ª–∏—è</th>
        <td>{{ model.last_name }}</td>
    </tr>
    <tr>
        <th>–†–æ–ª—å</th>
        <td>{{ model.role.name if model.role else "-" }}</td>
    </tr>
    <tr>
        <th>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —Ç—Ä–∏–∞–ª</th>
        <td>{{ "–î–∞" if model.has_used_trial else "–ù–µ—Ç" }}</td>
    </tr>
</table>

<hr>

<h3>üí≥ –ü–æ–¥–ø–∏—Å–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>

<table class="table table-striped">
    <thead>
    <tr>
        <th>ID</th>
        <th>–¢–∏–ø</th>
        <th>–ê–∫—Ç–∏–≤–Ω–∞</th>
        <th>–ù–∞—á–∞–ª–æ</th>
        <th>–û–∫–æ–Ω—á–∞–Ω–∏–µ</th>
        <th></th>
    </tr>
    </thead>
    <tbody>
    {% for sub in model.subscriptions %}
    <tr {% if sub.is_active %} style="background:#e6ffe6;" {% endif %}>
        <td>{{ sub.id }}</td>
        <td>{{ sub.type.name if sub.type else "-" }}</td>

        <td>
            {% if sub.is_active %}
            <span style="color:green;font-weight:bold">–ê–ö–¢–ò–í–ù–ê</span>
            {% else %}
            ‚ùå
            {% endif %}
        </td>

        <td>{{ sub.start_date.strftime("%Y-%m-%d") if sub.start_date else "-" }}</td>
        <td>{{ sub.end_date.strftime("%Y-%m-%d") if sub.end_date else "‚àû" }}</td>

        <td>
            <a href="/bot/admin/subscription/details/{{ sub.id }}"
               class="btn btn-sm btn-info">
                üëÅ –û—Ç–∫—Ä—ã—Ç—å
            </a>

            <a href="/bot/admin/subscription/edit/{{ sub.id }}"
               class="btn btn-sm btn-primary">
                ‚úèÔ∏è
            </a>
        </td>
    </tr>
    {% else %}
    <tr>
        <td colspan="6">–ù–µ—Ç –ø–æ–¥–ø–∏—Å–æ–∫</td>
    </tr>
    {% endfor %}
    </tbody>
</table>

<hr>

<h3>üîê VPN –∫–æ–Ω—Ñ–∏–≥–∏</h3>

<table class="table table-striped">
    <thead>
    <tr>
        <th>ID</th>
        <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
        <th>–°–æ–∑–¥–∞–Ω</th>
        <th></th>
    </tr>
    </thead>
    <tbody>
    {% for vpn in model.vpn_configs %}
    <tr>
        <td>{{ vpn.id }}</td>
        <td>{{ vpn.file_name if vpn.file_name else "config" }}</td>
        <td>{{ vpn.created_at.strftime("%Y-%m-%d %H:%M") if vpn.created_at else "-" }}</td>

        <td>

            <a href="/bot/admin/vpn-config/details/{{ vpn.id }}"
               class="btn btn-sm btn-info">
                üëÅ
            </a>
        </td>
    </tr>
    {% else %}
    <tr>
        <td colspan="4">–ù–µ—Ç –∫–æ–Ω—Ñ–∏–≥–æ–≤</td>
    </tr>
    {% endfor %}
    </tbody>
</table>

{% endblock %}
